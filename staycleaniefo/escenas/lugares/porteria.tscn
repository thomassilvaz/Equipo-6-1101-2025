[gd_scene load_steps=22 format=4 uid="uid://bdyg28ciuwu2d"]

[ext_resource type="Script" uid="uid://dnwrc2q5fpbsr" path="res://scripts/nivel.gd" id="1_a455t"]
[ext_resource type="Texture2D" uid="uid://d3rb8yimfxck7" path="res://Imagenes/Texturas/pasillo1.png" id="2_idsxw"]
[ext_resource type="Texture2D" uid="uid://dicrdvhhfvdpw" path="res://Imagenes/Texturas/entrada_tex.png" id="3_ruxvm"]
[ext_resource type="Texture2D" uid="uid://bohwfxdy21okn" path="res://Imagenes/Texturas/escaleras.png" id="4_bxpn3"]
[ext_resource type="PackedScene" uid="uid://do257tduj2rj5" path="res://escenas/puerta.tscn" id="5_8j774"]
[ext_resource type="Texture2D" uid="uid://xtf0tfl7y1m1" path="res://Imagenes/Texturas/escaleras2.png" id="6_8pouh"]
[ext_resource type="Texture2D" uid="uid://cnxmpflivhljo" path="res://Imagenes/Texturas/objetos.png" id="7_m8660"]
[ext_resource type="PackedScene" uid="uid://c5vmdkr56auw1" path="res://escenas/jugador.tscn" id="8_lri4x"]
[ext_resource type="Script" uid="uid://bagc1l7bfvrmw" path="res://scripts/interactuables.gd" id="9_vrns3"]
[ext_resource type="PackedScene" uid="uid://40yj2htapr23" path="res://escenas/interactuable.tscn" id="10_lneuw"]
[ext_resource type="Resource" uid="uid://dm8jl07l08p4c" path="res://Dialogos/test_puerta.dialogue" id="11_x0ttr"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1dusw"]
texture = ExtResource("2_idsxw")
separation = Vector2i(8, 8)
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
3:0/0 = 0
4:0/0 = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
5:0/0 = 0
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
6:0/0 = 0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
7:0/0 = 0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
8:0/0 = 0
9:0/0 = 0
9:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
10:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
8:1/0 = 0
8:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, -44, -64, -44, 64, -64, 64)
9:1/0 = 0
10:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
7:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, -44, -64, -44, 64, -64, 64)
8:2/0 = 0
9:2/0 = 0
10:2/0 = 0
11:0/0 = 0
11:1/0 = 0
11:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_duky7"]
texture = ExtResource("3_ruxvm")
texture_region_size = Vector2i(128, 128)
0:0/size_in_atlas = Vector2i(3, 5)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_6qghq"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_1dusw")
sources/2 = SubResource("TileSetAtlasSource_duky7")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_k43si"]
texture = ExtResource("4_bxpn3")
texture_region_size = Vector2i(128, 128)
0:0/size_in_atlas = Vector2i(5, 5)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_duky7"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_k43si")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_gtvei"]
texture = ExtResource("6_8pouh")
texture_region_size = Vector2i(128, 128)
0:0/size_in_atlas = Vector2i(5, 5)
0:0/0 = 0
0:0/0/y_sort_origin = -200

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lln2g"]
texture = ExtResource("7_m8660")
separation = Vector2i(2, 2)
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
0:1/0 = 0
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-63.4075, 28.6768, 64.0448, 28.3581, 64.0448, 60.2212, -63.7262, 59.584)
2:1/0 = 0

[sub_resource type="TileSet" id="TileSet_lln2g"]
physics_layer_0/collision_layer = 1
sources/1 = SubResource("TileSetAtlasSource_gtvei")
sources/2 = SubResource("TileSetAtlasSource_lln2g")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o8jhn"]
size = Vector2(54, 262)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gtvei"]
size = Vector2(112, 104)

[node name="porteria" type="Node2D"]
script = ExtResource("1_a455t")

[node name="Mapa" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAAAAAAAAACAAIAAFABAAAAAAABAAIAAFACAAAAAAABAAIAAFADAAAAAAABAAIAAFAEAAAAAAABAAIAAFAFAAAAAAABAAIAAFAGAAAAAAABAAIAAFAAAAEAAAABAAIAAAABAAEAAAAAAAEAAAACAAEAAAAAAAEAAAACAAIAAAAAAAEAAAADAAIAAAAAAAEAAAADAAEAAAAAAAEAAAAEAAEAAAAAAAEAAAAEAAIAAAAAAAEAAAAFAAIAAAAAAAEAAAAFAAEAAAAAAAEAAAAGAAEAAAAAAAEAAAAGAAIAAAAAAAEAAAAGAAMAAAAAAAEAAAAFAAMAAAACAAEAAAAEAAMAAAACAAEAAAAAAP//AAAHAAAAAAABAP//AAAHAAAAAAADAP//AAAHAAAAAAAEAP//AAAHAAAAAAAFAP//AAAHAAAAAAAGAP//AAAHAAAAAAD//wAAAAAHAAIAADD/////AAAHAAIAADAGAAQAAAABAAIAAGAEAAQAAAACAAEAAAAFAAQAAAACAAEAAAAIAAIAAgAAAAAAAAACAP//AAALAAEAAAA=")
tile_set = SubResource("TileSet_6qghq")

[node name="Escaleras" type="TileMapLayer" parent="Mapa"]
tile_map_data = PackedByteArray("AAABAAIAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_duky7")

[node name="Puertas" type="Node" parent="."]

[node name="Puerta_entrada" parent="Puertas" instance=ExtResource("5_8j774")]
position = Vector2(-13, 257)
scale = Vector2(2.57005, -12.0251)
destino_nivel_tag = "piso_1"
destino_puerta_tag = "cancha"
spawn_direccion = "derecha"

[node name="Spawn" parent="Puertas/Puerta_entrada" index="1"]
position = Vector2(21.4891, -0.153243)

[node name="ysort" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Objetos" type="TileMapLayer" parent="ysort"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAALACMAAQAAAAAAAAALABQAAQAAAAAAAAAvAP3/AgABAAEAAAAkAP3/AgABAAEAAAAuAPz/AgACAAEAAAAgAPz/AgACAAEAAAA=")
tile_set = SubResource("TileSet_lln2g")

[node name="jugador" parent="ysort" instance=ExtResource("8_lri4x")]
position = Vector2(473, 164)

[node name="Colisiones" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Colisiones"]
polygon = PackedVector2Array(444, 392, 311, 264, 184, 263, 55, 137, -8, 137, -8, 103, 60, 104, 186, 230, 316, 230, 440, 355)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Colisiones"]
position = Vector2(1, 241)
polygon = PackedVector2Array(444, 392, 311, 264, 184, 263, 55, 137, -8, 137, -8, 103, 60, 104, 186, 230, 316, 230, 440, 355)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Colisiones"]
position = Vector2(-27, 259)
shape = SubResource("RectangleShape2D_o8jhn")

[node name="Interactuables" type="Node" parent="."]
script = ExtResource("9_vrns3")

[node name="Secretaria" parent="Interactuables" instance=ExtResource("10_lneuw")]
collision_mask = 1
dialogue_resource = ExtResource("11_x0ttr")
dialogue_start = "secretaria"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactuables/Secretaria"]
position = Vector2(320, -40)
shape = SubResource("RectangleShape2D_gtvei")
debug_color = Color(0.966744, 0, 0.478621, 0.42)

[connection signal="body_entered" from="Interactuables/Secretaria" to="Interactuables" method="_on_secretaria_body_entered"]
[connection signal="body_exited" from="Interactuables/Secretaria" to="Interactuables" method="_on_secretaria_body_exited"]

[editable path="Puertas/Puerta_entrada"]
